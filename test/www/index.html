<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Test page</title>
		<script>
			async function showTime() {
				let timeSpan = document.querySelector('#timeSpan');
				try {
					let response = await fetch('echo');
					if (response.status == 200) {
						let date = await response.json();
						timeSpan.textContent = new Date(date).toLocaleString();
					} else {
						timeSpan.textContent = response.status + ':' + response.statusText;
					}
				} catch(e) {
					timeSpan.textContent = 'Error: ' + (e.message || e);
				} finally {
					setTimeout(showTime, 5000);
				}
			}
		</script>
	</head>
	<body onload="showTime()">
		<h1>Hello world!</h1>
		<p>Current Time: <span id="timeSpan"></span></p>
		<a href="about">Server Environment Variables</a>
	</body>
</html>
