{"version":3,"file":"websocket.js","sourceRoot":"","sources":["../../src/middleware/websocket.ts"],"names":[],"mappings":"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"}